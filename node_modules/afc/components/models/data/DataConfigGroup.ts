///<reference path="../../helpers/EventSink.ts" />
 
namespace AFC.Data {
    export function DataConfigGroupMixin<T extends Tools.Constructor<{}>>(Base: T) {
        abstract class DataConfigGroup extends Base implements IDataSource {
            public _list: Array<any> = [];

            public abstract get columns(): ReadonlyArray<IDBColumn>;
            public abstract get values(): ReadonlyArray<ReadonlyArray<any>>;

            public get length(): number {
                return this.values && this.values.length;
            }

            public item(index: number): AFC.Data.IDataItemContainer {
                return {
                    dataItem: Tools.Data.mapRow(this.columns, this.values[index]),
                    dataItemIndex: index
                };
            }
        }
        return DataConfigGroup;
    }
    
    export const DataConfigGroup: Tools.Constructor<Tools.EventSink&IDataSource> = DataConfigGroupMixin(Tools.EventSink);
    export type DataConfigGroup = typeof DataConfigGroup;
}